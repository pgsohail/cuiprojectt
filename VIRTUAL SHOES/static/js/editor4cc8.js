let url_objects=url_object.searchParams.get("object")||url_object.searchParams.get("objects")||url_object.searchParams.get("name")||"";function showModelInfo(e){e=e||wearfits.object;let t=document.getElementById("popup");t.innerHTML="",t.style.display="block";let n=document.createElement("div");n.innerHTML="&times;",n.style.font="60px Helvetica, Arial",n.style.cursor="pointer",n.onclick=(()=>t.style.display="none"),t.appendChild(n);let o=document.createElement("div");o.innerHTML="<p>View in <b>AR</b> on your Smartphone</p>",new QRCode(o,wearfits.getARLink())._el.style.display="inline-block",t.appendChild(o);let a=document.createElement("div");a.innerHTML="",a.innerHTML+="<p>Model ID: "+e.name+"</p>",a.innerHTML+='<p>Edit materials: <a href="/editor?object='+e.name+'">'+wearfits.origin+"/editor?object="+e.name+"</a></p>",window.username||(a.innerHTML+='<p style="font-size: 12px;margin-top:-15px;color: red">(you have no account - model can be modified by anyone!)</p>'),a.innerHTML+='<p>Share 3D view: <a href="/viewer?object='+e.name+'">'+wearfits.origin+"/viewer?object="+e.name+"</a></p>",a.innerHTML+='<p>Share AR view: <a href="'+wearfits.getARLink()+'">'+wearfits.getARLink()+"</a></p>",a.innerHTML+='<p>Status: Android (<span id="android_ar_status">converting...</span>) IOS (<span id="ios_ar_status">converting...</span>)</p>',t.appendChild(a)}async function uploadSceneAndShowInfo(){try{let e=wearfits.selected.object||wearfits.object;await window.wf_editor.saveScene(e,e=>{wearfits.showToast(e,!1,null,0)}),wearfits.showToast("Success!"),await new Promise(e=>setTimeout(e,100)),wearfits.getUSDZ(),wearfits.getGLTF(),await new Promise(e=>setTimeout(e,300)),window.location.href="/object/"+e.name}catch(e){console.log(e),wearfits.showToast("Failed: "+e,!0,null,0)}}function onFirstUpload(){centered_info.style.display="none";let e=document.getElementById("wearfits_render_button");e&&(e.style.display="flex")}function onDocumentLoad(){let e=document.getElementById("centered_info");url_objects||(window.centered_info.style.display="block"),e.addEventListener("click",()=>{let e=document.createElement("input");e.type="file",e.multiple="multiple",e.onchange=(()=>{wearfits.loadByFiles(e.files),onFirstUpload()}),e.click()},!1),e.addEventListener("drop",e=>{wearfits.onCanvasDrop(e),onFirstUpload()},!1),e.addEventListener("dragover",e=>e.preventDefault(),!1)}url_objects||(wearfits.showARButton=!1),wf_editor.onInitCallback=function(){window.wf_editor_upload_scene_button.onclick=uploadSceneAndShowInfo},wearfits.addEventListener("object_load",async function(e){onFirstUpload()}),wearfits.addEventListener("scene_load",async function(e){wearfits.setSelectedMaterialAny()}),(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?setTimeout(onDocumentLoad,0):document.addEventListener("DOMContentLoaded",onDocumentLoad);