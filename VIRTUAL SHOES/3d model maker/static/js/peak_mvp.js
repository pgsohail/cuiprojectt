"use strict";function updatePresets(e,t,o){e.innerHTML="",e.setAttribute("size",t.length);for(let r of t){let t=document.createElement("option");t.value=r.name,t.text=r.name,r.name===o&&t.setAttribute("selected",!0),e.append(t)}}function get_viewer_url(){return"/viewer?object="+wearfits.getSceneName()}async function on_preset_change(e){const t=["bottom-type","bottom-preset","upper-type","upper-preset"];let o="";for(let r of t)e.classList.contains(r)&&(o=r);for(let e of document.getElementsByClassName(o))e.classList.remove("selected");e.classList.add("selected"),"bottom-type"===o?wf_hers.bottom_model_id=e.id:"bottom-preset"===o?wf_hers.bottom_material_id=e.id:"upper-type"===o?wf_hers.upper_model_id=e.id:"upper-preset"===o&&(wf_hers.upper_material_id=e.id),wf_hers.update_model()}function update_price(){const e={PD_001:150,PD_002:170,PD_003:200}[wf_hers.bottom_model_id]+{CH_D_005_L:200,CH_D_010_R:150,CH_M_001_L:250,CH_M_004_L:140,CH_M_007_L:170}[wf_hers.upper_model_id]+{PD_TEX_001:180,PD_TEX_002:170,PD_TEX_003:190,PD_TEX_004:210,PD_TEX_005:240,PD_TEX_007:230,PD_TEX_008:220,PD_TEX_009:200,PD_TEX_010:170,PD_TEX_011:250,PD_TEX_012:260}[wf_hers.bottom_material_id]+{CH_TEX_001:70,CH_TEX_002:75,CH_TEX_003:90,CH_TEX_004:65,CH_TEX_005:55,CH_TEX_006:85,CH_TEX_007:50,CH_TEX_001_FADE:100,CH_TEX_002_FADE:105,CH_TEX_003_FADE:120,CH_TEX_004_FADE:95,CH_TEX_005_FADE:85,CH_TEX_006_FADE:80}[wf_hers.upper_material_id];document.getElementById("price").innerHTML=e+" PLN"}function get_simplified_value_from_result(e,t){const o=e[t];let r=o[0]||o[1];return o[0]&&o[1]&&(r=.5*(o[0]+o[1])),r=Math.round(1e3*r)/10}function get_formatted_date(e){var t=new Date(e),o=t.getMonth()+1,r=t.getDate(),n=t.getHours(),_=t.getMinutes(),i=t.getSeconds();return o=(o<10?"0":"")+o,r=(r<10?"0":"")+r,n=(n<10?"0":"")+n,_=(_<10?"0":"")+_,i=(i<10?"0":"")+i,t.getFullYear()+"-"+o+"-"+r+" "+n+":"+_+":"+i}async function get_measurements(){const e=document.getElementById("email"),t=document.getElementById("pin"),o=document.getElementById("get_measurement_status");o.innerHTML="";const r=e.value,n=t.value;if(!r)return void(o.innerHTML="E-mail nie może być pusty");if(!n)return void(o.innerHTML="Pin nie może być pusty");const _="?email="+r+"&pin="+n;try{const e=await wearfits.request("/measurements/api/get_by_email"+_,"GET");if("null"===e)return void(o.innerHTML="Brak danych dla podanego e-mail i pinu");const t=JSON.parse(e),r=t.result;if(!r)return void(o.innerHTML="Wynik jeszcze nie przetworzony, spróbuj pobrać za kilka sekund");window.foot_measure_date.innerHTML="Zmierzono: "+get_formatted_date(t.created),window.foot_length.innerHTML="Długość: "+get_simplified_value_from_result(r,"CCC - Długość")+" cm",window.foot_width.innerHTML="Szerokość: "+get_simplified_value_from_result(r,"Szerokość")+" cm",window.foot_height.innerHTML="Wysokość: "+get_simplified_value_from_result(r,"Wysokość")+" cm",window.foot_cross_section_1.innerHTML="Przekrój Poprzeczny 1: "+get_simplified_value_from_result(r,"Przekrój Poprzeczny 1")+" cm",window.foot_cross_section_2.innerHTML="Przekrój Poprzeczny 2: "+get_simplified_value_from_result(r,"Przekrój Poprzeczny 2")+" cm",window.foot_cross_section_3.innerHTML="Przekrój Poprzeczny 3: "+get_simplified_value_from_result(r,"Przekrój Poprzeczny 3")+" cm",o.innerHTML="",window.measurement_window.style.display="none",window.right_panel.scrollTop=window.right_panel.scrollHeight}catch(e){console.log(e),o.innerHTML="Error"}}function onDocumentLoad(){wf_hers.update_model(),wearfits.setLanguage("pl")}!function(e){wearfits.origin="https://dev.wearfits.com",wearfits.cdn="https://dev.wearfits.com",wearfits.background=14540253,wearfits.defaultTheme="hers",wearfits.showRayTracingButton=!0,wearfits.rayTracingToneMapping=4,wearfits.rayTracingToneMappingExposure=1,wearfits.rayTracingUseGround=!1,wearfits.showMaterialPresets=!1,wearfits.wearfitsLogoUrl=null,e.duplicate_models=!0,e.bottom_model_id="PD_001",e.upper_model_id="CH_M_007_L",e.bottom_material_id="PD_TEX_001",e.upper_material_id="CH_TEX_003",e.is_fade="";let t=[{position:[0,0,0],rotation:[0,-1.57,0]},{scale:[1,1,-1],position:[-.18,.05,.05],rotation:[-1.57,0,-.8]}],o=[{position:[0,0,0],rotation:[0,-1.57,0]},{scale:[1,1,-1],position:[-.15,.03,.02],rotation:[-1.57,.2,-1.17]}];e.update_model=function(){update_price(),wearfits.pauseRendering=!0;let r=["CH_D_010_R","CH_M_004_L","CH_M_007_L"].includes(e.upper_model_id)?o:t;e.duplicate_models||(r=null);let n=wearfits.load(e.upper_model_id,{index:0,instances:r,noFocus:!1,preset:e.upper_material_id+e.is_fade}),_=e.upper_model_id.slice(0,-2)+"-"+e.bottom_model_id,i=wearfits.load(_,{index:1,instances:r,noFocus:!0,preset:e.bottom_material_id});return Promise.all([i,n]).then(()=>{wearfits.pauseRendering=!1})}}(window.wf_hers={}),wearfits.addEventListener("scene_load",()=>{const e=document.getElementById("wearfits_vertical_buttons_group");e.prepend(wearfits_ar_mode_button),e.prepend(wearfits_render_button),wearfits_ar_mode_button.innerHTML+='<div class="wearfits_button_label wearfits-hide-on-mobile wftrans_tryon_in_ar">Zobacz w AR</div>',wearfits_render_button.innerHTML+='<div class="wearfits_button_label wearfits-hide-on-mobile wftrans_tryon_in_ar">Widok realistyczny</div>'}),(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?setTimeout(onDocumentLoad,0):document.addEventListener("DOMContentLoaded",onDocumentLoad);